"use strict";(self.webpackChunkasistencia_legal=self.webpackChunkasistencia_legal||[]).push([[189],{6189:(ce,N,d)=>{d.r(N),d.d(N,{ChildRoutesModule:()=>se});var _=d(1802),t=d(8256),G=d(452);let z=(()=>{class a{constructor(e){this.srvSettings=e}ngOnInit(){this.srvSettings.ponerVisto()}cambiarTema(e){this.srvSettings.cambiarTema(e)}static#t=this.\u0275fac=function(i){return new(i||a)(t.Y36(G.g))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-account-settings"]],decls:50,vars:0,consts:[[1,"row"],[1,"col-5"],[1,"card"],[1,"card-body"],[1,"r-panel-body"],["id","themecolors",1,"m-t-20"],["data-theme","default",1,"selector","default-theme","working",3,"click"],["data-theme","green",1,"selector","green-theme",3,"click"],["data-theme","red",1,"selector","red-theme",3,"click"],["data-theme","blue",1,"selector","blue-theme",3,"click"],["data-theme","purple",1,"selector","purple-theme",3,"click"],["data-theme","megna",1,"selector","megna-theme",3,"click"],[1,"d-block","m-t-30"],["data-theme","default-dark",1,"selector","default-dark-theme",3,"click"],["data-theme","green-dark",1,"selector","green-dark-theme",3,"click"],["data-theme","red-dark",1,"selector","red-dark-theme",3,"click"],["data-theme","blue-dark",1,"selector","blue-dark-theme",3,"click"],["data-theme","purple-dark",1,"selector","purple-dark-theme",3,"click"],["data-theme","megna-dark",1,"selector","megna-dark-theme",3,"click"]],template:function(i,r){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3"),t._uU(5,"Seleccione el tema a configurar"),t.qZA(),t.TgZ(6,"div",4)(7,"ul",5)(8,"li")(9,"b"),t._uU(10,"Con el sidebar claro"),t.qZA()(),t.TgZ(11,"li")(12,"a",6),t.NdJ("click",function(){return r.cambiarTema("default")}),t._uU(13,"1"),t.qZA()(),t.TgZ(14,"li")(15,"a",7),t.NdJ("click",function(){return r.cambiarTema("green")}),t._uU(16,"2"),t.qZA()(),t.TgZ(17,"li")(18,"a",8),t.NdJ("click",function(){return r.cambiarTema("red")}),t._uU(19,"3"),t.qZA()(),t.TgZ(20,"li")(21,"a",9),t.NdJ("click",function(){return r.cambiarTema("blue")}),t._uU(22,"4"),t.qZA()(),t.TgZ(23,"li")(24,"a",10),t.NdJ("click",function(){return r.cambiarTema("purple")}),t._uU(25,"5"),t.qZA()(),t.TgZ(26,"li")(27,"a",11),t.NdJ("click",function(){return r.cambiarTema("megna")}),t._uU(28,"6"),t.qZA()(),t.TgZ(29,"li",12)(30,"b"),t._uU(31,"Con el sidebar oscuro"),t.qZA()(),t.TgZ(32,"li")(33,"a",13),t.NdJ("click",function(){return r.cambiarTema("default-dark")}),t._uU(34,"7"),t.qZA()(),t.TgZ(35,"li")(36,"a",14),t.NdJ("click",function(){return r.cambiarTema("green-dark")}),t._uU(37,"8"),t.qZA()(),t.TgZ(38,"li")(39,"a",15),t.NdJ("click",function(){return r.cambiarTema("red-dark")}),t._uU(40,"9"),t.qZA()(),t.TgZ(41,"li")(42,"a",16),t.NdJ("click",function(){return r.cambiarTema("blue-dark")}),t._uU(43,"10"),t.qZA()(),t.TgZ(44,"li")(45,"a",17),t.NdJ("click",function(){return r.cambiarTema("purple-dark")}),t._uU(46,"11"),t.qZA()(),t.TgZ(47,"li")(48,"a",18),t.NdJ("click",function(){return r.cambiarTema("megna-dark")}),t._uU(49,"12"),t.qZA()()()()()()()())},encapsulation:2})}return a})(),j=(()=>{class a{static#t=this.\u0275fac=function(i){return new(i||a)};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-dashboard"]],decls:2,vars:0,template:function(i,r){1&i&&(t.TgZ(0,"p"),t._uU(1,"dashboard works!"),t.qZA())},encapsulation:2})}return a})();var L=d(727);class H extends L.w0{constructor(n,e){super()}schedule(n,e=0){return this}}const Z={setInterval(a,n,...e){const{delegate:i}=Z;return i?.setInterval?i.setInterval(a,n,...e):setInterval(a,n,...e)},clearInterval(a){const{delegate:n}=Z;return(n?.clearInterval||clearInterval)(a)},delegate:void 0};var K=d(8737);const F={now:()=>(F.delegate||Date).now(),delegate:void 0};class f{constructor(n,e=f.now){this.schedulerActionCtor=n,this.now=e}schedule(n,e=0,i){return new this.schedulerActionCtor(this,n).schedule(i,e)}}f.now=F.now;const E=new class D extends f{constructor(n,e=f.now){super(n,e),this.actions=[],this._active=!1}flush(n){const{actions:e}=this;if(this._active)return void e.push(n);let i;this._active=!0;do{if(i=n.execute(n.state,n.delay))break}while(n=e.shift());if(this._active=!1,i){for(;n=e.shift();)n.unsubscribe();throw i}}}(class R extends H{constructor(n,e){super(n,e),this.scheduler=n,this.work=e,this.pending=!1}schedule(n,e=0){var i;if(this.closed)return this;this.state=n;const r=this.id,o=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(o,r,e)),this.pending=!0,this.delay=e,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(o,this.id,e),this}requestAsyncId(n,e,i=0){return Z.setInterval(n.flush.bind(n,this),i)}recycleAsyncId(n,e,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return e;null!=e&&Z.clearInterval(e)}execute(n,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(n,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,e){let r,i=!1;try{this.work(n)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:n,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,(0,K.P)(i,this),null!=n&&(this.id=this.recycleAsyncId(e,n,null)),this.delay=null,super.unsubscribe()}}}),V=E;var W=d(7272),Y=d(5698),X=d(4482),tt=d(5403),et=d(5032),at=d(9718),rt=d(5577);function $(a,n){return n?e=>(0,W.z)(n.pipe((0,Y.q)(1),function it(){return(0,X.e)((a,n)=>{a.subscribe((0,tt.x)(n,et.Z))})}()),e.pipe($(a))):(0,rt.z)((e,i)=>a(e,i).pipe((0,Y.q)(1),(0,at.h)(e)))}var ot=d(9751),nt=d(3532);function q(a,n=E){const e=function ct(a=0,n,e=V){let i=-1;return null!=n&&((0,nt.K)(n)?e=n:i=n),new ot.y(r=>{let o=function st(a){return a instanceof Date&&!isNaN(a)}(a)?+a-e.now():a;o<0&&(o=0);let s=0;return e.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}(a,n);return $(()=>e)}var lt=d(5226),u=d.n(lt),S=d(5763),g=d(4004),k=d(2340),ut=d(8164);class M{constructor(n,e,i,r,o,s,l,m,v,J){this.cedula=n,this.nombre_completo=e,this.direccion=i,this.celular=r,this.correo=o,this.tipo_cliente=s,this.img_public_id=l,this.img_secure_url=m,this.usuario=v,this._id=J}}var y=d(529);const I=k.N.base_url;let T=(()=>{class a{constructor(e){this.http=e}get token(){return localStorage.getItem("token")||""}get headers(){return{headers:{"x-token":this.token}}}transformarUsuarios(e){return e.map(i=>new ut.b(i.nombre,i.email,"",i.img_public_id,i.img_secure_url,i.role,i.uid))}transformarClientes(e){return e.map(i=>new M(i.cedula,i.nombre_completo,i.direccion,i.celular,i.correo,i.tipo_cliente,i.img_public_id,i.img_secure_url,i.usuario,i._id))}transformarTemas(e){return e}buscarTodo(e){return console.log(e),this.http.get(`${I}/busqueda/${e}`,this.headers)}buscar(e,i){return this.http.get(`${I}/busqueda/${e}/${i}`,this.headers).pipe((0,g.U)(o=>{switch(e){case"usuarios":return this.transformarUsuarios(o.data);case"temas":return this.transformarTemas(o.data);case"clientes":return this.transformarClientes(o.data);default:return[]}}))}buscarFiltrado(e,i,r){return this.http.get(`${I}/busqueda/${e}/${r}/${i}`,this.headers).pipe((0,g.U)(s=>"temas"===e?this.transformarTemas(s.data):[]))}static#t=this.\u0275fac=function(i){return new(i||a)(t.LFG(y.eN))};static#e=this.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var A=d(9096),p=d(6895),c=d(433);function dt(a,n){1&a&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",8)(3,"h4",9),t._uU(4,"Cargando"),t.qZA(),t._UZ(5,"i",10),t.TgZ(6,"p",11),t._uU(7,"Por favor espere"),t.qZA()()()())}function mt(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"td",34)(1,"img",35),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,o=t.oxw(2);return t.KtG(o.abrirModal(r))}),t.qZA()()}}function pt(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"td",34)(1,"img",36),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,o=t.oxw(2);return t.KtG(o.abrirModal(r))}),t.qZA()()}if(2&a){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("src",e.img_secure_url,t.LSH)}}function _t(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"tr"),t.YNc(1,mt,2,0,"td",27),t.YNc(2,pt,2,1,"td",27),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td")(8,"select",28),t.NdJ("ngModelChange",function(r){const s=t.CHM(e).$implicit;return t.KtG(s.role=r)})("change",function(){const o=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.cambiarRole(o))}),t.TgZ(9,"option",29),t._uU(10,"Admin"),t.qZA(),t.TgZ(11,"option",30),t._uU(12,"User"),t.qZA()()(),t.TgZ(13,"td",31)(14,"a",32),t.NdJ("click",function(){const o=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.eliminarUsuario(o))}),t._UZ(15,"i",33),t.qZA()()()}if(2&a){const e=n.$implicit;t.xp6(1),t.Q6J("ngIf",!e.img_secure_url),t.xp6(1),t.Q6J("ngIf",e.img_secure_url),t.xp6(2),t.Oqu(e.email),t.xp6(2),t.Oqu(e.nombre),t.xp6(2),t.Q6J("ngModel",e.role)}}function ht(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"div")(1,"button",37),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.cambiarPagina(-5))}),t._uU(2,"Anteriores"),t.qZA(),t._uU(3," \xa0 "),t.TgZ(4,"button",37),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.cambiarPagina(5))}),t._uU(5,"Siguientes"),t.qZA()()}}function gt(a,n){if(1&a&&(t.TgZ(0,"div",12)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",12)(5,"div",13)(6,"h4",14),t._uU(7),t.qZA(),t.TgZ(8,"h6",15),t._uU(9,"Usuarios registrados en mi aplicaci\xf3n"),t.qZA()(),t.TgZ(10,"div",16)(11,"div",17)(12,"a",18),t._UZ(13,"i",19),t._uU(14," Crear usuario "),t.qZA()()()(),t.TgZ(15,"div",20)(16,"table",21)(17,"thead")(18,"tr")(19,"th",22),t._uU(20,"Avatar"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"Correo"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"Nombre"),t.qZA(),t.TgZ(25,"th",23),t._uU(26,"Nivel"),t.qZA(),t.TgZ(27,"th",24),t._uU(28,"Acciones"),t.qZA()()(),t.TgZ(29,"tbody"),t.YNc(30,_t,16,5,"tr",25),t.qZA()()(),t.YNc(31,ht,6,0,"div",26),t.qZA()()()()),2&a){const e=t.oxw(),i=t.MAs(5);t.xp6(7),t.hij("Total de Usuarios (",e.totalUsuarios,")"),t.xp6(23),t.Q6J("ngForOf",e.usuarios),t.xp6(1),t.Q6J("ngIf",0===i.value.length)}}let ft=(()=>{class a{constructor(e,i,r){this.usuService=e,this.busquedasSrv=i,this.modalImagenSrv=r,this.usuarios=[],this.usuariosTemp=[],this.desde=0,this.cargando=!1}ngOnDestroy(){}ngOnInit(){this.cargarUsuarios(),this.imgSubs=this.modalImagenSrv.imagenCambio.pipe(q(100)).subscribe(e=>{this.cargarUsuarios()})}cargarUsuarios(){this.cargando=!0,this.usuService.cargarUsuarios(this.desde).subscribe(({total:e,usuarios:i})=>{this.totalUsuarios=e,this.usuarios=i,this.usuariosTemp=i,this.cargando=!1})}cambiarPagina(e){this.desde+=e,this.desde<0?this.desde=0:this.desde>this.totalUsuarios&&(this.desde-=e),this.cargarUsuarios()}buscar(e){return 0===e.length?this.usuarios=this.usuariosTemp:(this.busquedasSrv.buscar("usuarios",e).subscribe(i=>{this.usuarios=i}),!0)}eliminarUsuario(e){return e.uid===this.usuService.uid?u().fire("Error","No puede borrarse a s\xed mismo","error"):(u().fire({title:"\xbfEst\xe1 seguro de eliminar el usuario?",text:`Est\xe1 a punto de borrar a ${e.nombre}`,icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xed, elim\xednalo!"}).then(i=>{i.value&&this.usuService.eliminarUsuario(e).subscribe(r=>{this.cargarUsuarios(),u().fire("Usuario borrado.",`${e.nombre} fue eliminado corr\xe9ctamente`,"success")})}),!0)}cambiarRole(e){this.usuService.guardarUsuario(e).subscribe()}abrirModal(e){this.modalImagenSrv.abrirModal("usuarios",e.uid,e.img_secure_url)}static#t=this.\u0275fac=function(i){return new(i||a)(t.Y36(S.i),t.Y36(T),t.Y36(A.$))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-usuarios"]],decls:8,vars:2,consts:[[1,"row","animated","fadeIn","fast"],[1,"col-12"],[1,"card"],[1,"card-body"],["type","text","placeholder","Buscar usuario...",1,"form-control",3,"keyup"],["txtBusqueda",""],["class","row animated fadeIn fast",4,"ngIf"],["class","row",4,"ngIf"],[1,"alert","alert-info","text-center"],[1,"alert-heading"],[1,"fa","fa-spin","fa-refresh","fa-2x"],[1,"mb-0"],[1,"row"],[1,"col-8"],[1,"card-title"],[1,"card-subtitle"],[1,"col"],[1,"text-right"],["routerLink","/dashboard/register",1,"btn","btn-primary"],[1,"fa","fa-hospital-o"],[1,"table-responsive"],[1,"table","table-bordered"],[1,"w100"],[1,"w140"],[1,"text-nowrap","w100"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","text-center",4,"ngIf"],[1,"form-control",3,"ngModel","ngModelChange","change"],["value","ADMIN_ROLE"],["value","USER_ROLE"],[1,"text-nowrap","text-center"],["data-toggle","tooltip","data-original-title","Close",1,"cursor",3,"click"],[1,"fa","fa-close","text-danger"],[1,"text-center"],["src","https://res.cloudinary.com/aabsolutions/image/upload/v1711909048/asistencia_legal/no-image.jpg","alt","Avatar de usuario",1,"avatar","cursor",3,"click"],["alt","Avatar de usuario",1,"avatar","cursor",3,"src","click"],[1,"btn","btn-secondary",3,"click"]],template:function(i,r){if(1&i){const o=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"input",4,5),t.NdJ("keyup",function(){t.CHM(o);const l=t.MAs(5);return t.KtG(r.buscar(l.value))}),t.qZA()()()()(),t.YNc(6,dt,8,0,"div",6),t.YNc(7,gt,32,3,"div",7)}2&i&&(t.xp6(6),t.Q6J("ngIf",r.cargando),t.xp6(1),t.Q6J("ngIf",!r.cargando))},dependencies:[p.sg,p.O5,c.YN,c.Kr,c.EJ,c.JJ,_.rH,c.On],encapsulation:2})}return a})();var w=d(162);function bt(a,n){if(1&a&&t._UZ(0,"img",22),2&a){const e=t.oxw();t.Q6J("src",e.usuario.img_secure_url,t.LSH)}}function vt(a,n){if(1&a&&t._UZ(0,"img",22),2&a){const e=t.oxw();t.Q6J("src",e.imgTemp,t.LSH)}}let Zt=(()=>{class a{constructor(e,i,r){this.fb=e,this.usuarioService=i,this.fileUploadService=r,this.imgTemp=null,this.usuario=i.usuario}ngOnInit(){this.perfilForm=this.fb.group({nombre:[this.usuario.nombre,c.kI.required],email:[this.usuario.email,[c.kI.required,c.kI.email]]})}actualizarPerfil(){this.usuarioService.actualizarPerfil(this.perfilForm.value).subscribe(()=>{const{nombre:e,email:i}=this.perfilForm.value;this.usuario.nombre=e,this.usuario.email=i,u().fire("Guardado","Cambios fueron guardados","success")},e=>{u().fire("Error",e.error.msg,"error")})}cambiarImagen(e){if(this.imagenSubir=e,!e)return this.imgTemp=null;const i=new FileReader;i.readAsDataURL(e),i.onloadend=()=>{this.imgTemp=i.result}}subirImagen(){this.fileUploadService.actualizarFoto(this.imagenSubir,"usuarios",this.usuario.uid).then(e=>{this.usuario.img_secure_url=e,u().fire("Guardado","Imagen de usuario actualizada","success")}).catch(e=>{console.log(e),u().fire("Error","No se pudo subir la imagen","error")})}static#t=this.\u0275fac=function(i){return new(i||a)(t.Y36(c.qu),t.Y36(S.i),t.Y36(w.J))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-perfil"]],decls:42,vars:5,consts:[[1,"row"],[1,"col-md-6"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"card-subtitle"],[1,"form","p-t-20",3,"formGroup","submit"],[1,"form-group"],["for","exampleInputuname"],[1,"input-group"],[1,"input-group-addon"],[1,"ti-user"],["type","text","id","exampleInputuname","placeholder","Nombre del usuario","formControlName","nombre",1,"form-control"],["for","exampleInputEmail1"],[1,"ti-email"],["type","email","id","exampleInputEmail1","placeholder","Email","formControlName","email",1,"form-control"],["type","submit",1,"btn","btn-success","btn-block","waves-effect","waves-light","m-r-10",3,"disabled"],[1,"fa","fa-save"],[1,"text-center"],["class","img-avatar",3,"src",4,"ngIf"],["type","file",3,"change"],["type","button",1,"btn","btn-success","btn-block","waves-effect","waves-light","m-r-10",3,"disabled","click"],[1,"img-avatar",3,"src"]],template:function(i,r){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),t._uU(5,"Mi perfil de usuario"),t.qZA(),t.TgZ(6,"h6",5),t._uU(7,"Ajustes"),t.qZA(),t.TgZ(8,"form",6),t.NdJ("submit",function(){return r.actualizarPerfil()}),t.TgZ(9,"div",7)(10,"label",8),t._uU(11,"User Name"),t.qZA(),t.TgZ(12,"div",9)(13,"div",10),t._UZ(14,"i",11),t.qZA(),t._UZ(15,"input",12),t.qZA()(),t.TgZ(16,"div",7)(17,"label",13),t._uU(18,"Email address"),t.qZA(),t.TgZ(19,"div",9)(20,"div",10),t._UZ(21,"i",14),t.qZA(),t._UZ(22,"input",15),t.qZA()(),t.TgZ(23,"button",16),t._UZ(24,"i",17),t._uU(25," Guardar cambios "),t.qZA()()()()(),t.TgZ(26,"div",1)(27,"div",2)(28,"div",3)(29,"h4",4),t._uU(30,"Avatar"),t.qZA(),t.TgZ(31,"h6",5),t._uU(32,"Imagen del usuario"),t.qZA(),t.TgZ(33,"div",18),t.YNc(34,bt,1,1,"img",19),t.YNc(35,vt,1,1,"img",19),t.qZA(),t.TgZ(36,"input",20),t.NdJ("change",function(s){return r.cambiarImagen(s.target.files[0])}),t.qZA(),t._UZ(37,"br")(38,"br"),t.TgZ(39,"button",21),t.NdJ("click",function(){return r.subirImagen()}),t._UZ(40,"i",17),t._uU(41," Cambiar imagen "),t.qZA()()()()()),2&i&&(t.xp6(8),t.Q6J("formGroup",r.perfilForm),t.xp6(15),t.Q6J("disabled",r.perfilForm.invalid),t.xp6(11),t.Q6J("ngIf",!r.imgTemp),t.xp6(1),t.Q6J("ngIf",r.imgTemp),t.xp6(4),t.Q6J("disabled",!r.imagenSubir))},dependencies:[p.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u],encapsulation:2})}return a})(),Tt=(()=>{class a{constructor(e,i){this.usuarioSrv=e,this.router=i}canActivate(e,i){return"ADMIN_ROLE"===this.usuarioSrv.role||(this.router.navigateByUrl("/dashboard"),!1)}static#t=this.\u0275fac=function(i){return new(i||a)(t.LFG(S.i),t.LFG(_.F0))};static#e=this.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var x=d(5861);const b=k.N.base_url;let C=(()=>{class a{constructor(e){this.http=e}get token(){return localStorage.getItem("token")||""}get headers(){return{headers:{"x-token":this.token}}}cargarClientes(e=0,i=0){return this.http.get(`${b}/clientes?from=${e}&limit=${i}`,this.headers).pipe((0,g.U)(o=>{const s=o.clientes.map(l=>new M(l.cedula,l.nombre_completo,l.direccion,l.celular,l.correo,l.tipo_cliente,l.img_public_id,l.img_secure_url,l.usuario,l._id));return{total:o.total,clientes:s}}))}cargarClientePorId(e){return this.http.get(`${b}/clientes/${e}`,this.headers).pipe((0,g.U)(r=>r.cliente))}crearCliente(e){return this.http.post(`${b}/clientes`,e,this.headers)}actualizarCliente(e){return this.http.put(`${b}/clientes/${e._id}`,e,this.headers)}eliminarCliente(e){return this.http.delete(`${b}/clientes/${e}`,this.headers)}static#t=this.\u0275fac=function(i){return new(i||a)(t.LFG(y.eN))};static#e=this.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();function At(a,n){1&a&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",8)(3,"h4",9),t._uU(4,"Cargando"),t.qZA(),t._UZ(5,"i",10),t.TgZ(6,"p",11),t._uU(7,"Por favor espere"),t.qZA()()()())}const Q=function(a){return[a]};function xt(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"td")(1,"img",35),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,o=t.oxw(2);return t.KtG(o.abrirModal(r))}),t.qZA()()}if(2&a){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("alt",t.VKq(1,Q,e.nombre_completo))}}function Ct(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"td")(1,"img",36),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,o=t.oxw(2);return t.KtG(o.abrirModal(r))}),t.qZA()()}if(2&a){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("src",e.img_secure_url,t.LSH)("alt",t.VKq(2,Q,e.nombre_completo))}}function Ut(a,n){1&a&&(t.TgZ(0,"span",37),t._uU(1,"Natural"),t.qZA())}function qt(a,n){1&a&&(t.TgZ(0,"span",38),t._uU(1,"Jur\xeddico"),t.qZA())}const St=function(a){return["/dashboard/clientes",a]},kt=function(a){return["/dashboard/temas/cliente",a]};function yt(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"tr"),t.YNc(1,xt,2,3,"td",26),t.YNc(2,Ct,2,4,"td",26),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t.YNc(10,Ut,2,0,"span",27),t.YNc(11,qt,2,0,"span",28),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td",29)(15,"a",30),t._UZ(16,"i",31),t.qZA(),t.TgZ(17,"a",30),t._UZ(18,"i",32),t.qZA(),t.TgZ(19,"a",33),t.NdJ("click",function(){const o=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.eliminarCliente(o))}),t._UZ(20,"i",34),t.qZA()()()}if(2&a){const e=n.$implicit;t.xp6(1),t.Q6J("ngIf",!e.img_secure_url),t.xp6(1),t.Q6J("ngIf",e.img_secure_url),t.xp6(2),t.Oqu(e.cedula),t.xp6(2),t.Oqu(e.nombre_completo),t.xp6(2),t.Oqu(e.direccion),t.xp6(2),t.Q6J("ngIf","NATURAL"===e.tipo_cliente),t.xp6(1),t.Q6J("ngIf","JURIDICO"===e.tipo_cliente),t.xp6(2),t.Oqu(e.celular),t.xp6(2),t.Q6J("routerLink",t.VKq(10,St,e._id)),t.xp6(2),t.Q6J("routerLink",t.VKq(12,kt,e._id))}}function It(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"div",12)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",12)(5,"div",13)(6,"h4",14),t._uU(7),t.qZA(),t.TgZ(8,"h6",15),t._uU(9,"Clientes registrados en mi aplicaci\xf3n"),t.qZA()(),t.TgZ(10,"div",16)(11,"div",17)(12,"a",18),t._UZ(13,"i",19),t._uU(14," Crear cliente "),t.qZA()()()(),t.TgZ(15,"div",20)(16,"table",21)(17,"thead")(18,"tr")(19,"th",22),t._uU(20,"Foto"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"C\xe9dula"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"Nombre completo"),t.qZA(),t.TgZ(25,"th"),t._uU(26,"Direcci\xf3n"),t.qZA(),t.TgZ(27,"th"),t._uU(28,"Tipo cliente"),t.qZA(),t.TgZ(29,"th"),t._uU(30,"Celular"),t.qZA(),t.TgZ(31,"th",23),t._uU(32,"Acciones"),t.qZA()()(),t.TgZ(33,"tbody"),t.YNc(34,yt,21,14,"tr",24),t.qZA()()(),t.TgZ(35,"div")(36,"button",25),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.cambiarPagina(-5))}),t._uU(37,"Anteriores"),t.qZA(),t._uU(38," \xa0 "),t.TgZ(39,"button",25),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.cambiarPagina(5))}),t._uU(40,"Siguientes"),t.qZA()()()()()()}if(2&a){const e=t.oxw();t.xp6(7),t.hij("Clientes (",e.clientes.length,")"),t.xp6(27),t.Q6J("ngForOf",e.clientes)}}let wt=(()=>{class a{constructor(e,i,r){this.clienteSrv=e,this.modalImagenSrv=i,this.busquedasSrv=r,this.clientes=[],this.clientesTemp=[],this.desde=0,this.cargando=!1}ngOnDestroy(){}ngOnInit(){this.cargarClientes(),this.imgSubs=this.modalImagenSrv.imagenCambio.pipe(q(100)).subscribe(e=>{this.cargarClientes()})}cargarClientes(){this.cargando=!0,this.clienteSrv.cargarClientes(this.desde).subscribe(({total:e,clientes:i})=>{this.clientes=i,this.clientesTemp=i,this.totalClientes=e,this.cargando=!1})}cambiarPagina(e){this.desde+=e,this.desde<0?this.desde=0:this.desde>this.totalClientes&&(this.desde-=e),this.cargarClientes()}buscar(e){return 0===e.length?this.clientes=this.clientesTemp:(this.busquedasSrv.buscar("clientes",e).subscribe(i=>{this.clientes=i,console.log(this.clientes)}),!0)}eliminarCliente(e){u().fire({title:"\xbfEst\xe1 seguro de eliminar el registro?",text:`Est\xe1 a punto de borrar el cliente: ${e.nombre_completo}`,icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xed, elim\xednalo!"}).then(i=>{i.value&&this.clienteSrv.eliminarCliente(e._id).subscribe(r=>{this.desde=0,this.cargarClientes(),u().fire("Usuario borrado.",`${e.nombre_completo} fue eliminado corr\xe9ctamente`,"success")})})}mostrarModal(){return(0,x.Z)(function*(){yield u().fire({title:"Registro de nuevo cliente",input:"text",inputPlaceholder:"Escriba el nombre del nuevo cliente",showCancelButton:!0,inputValidator:i=>!i&&"Debe ingresar el nombre"})})()}abrirModal(e){this.modalImagenSrv.abrirModal("clientes",e._id,e.img_secure_url)}static#t=this.\u0275fac=function(i){return new(i||a)(t.Y36(C),t.Y36(A.$),t.Y36(T))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-clientes"]],decls:8,vars:2,consts:[[1,"row","animated","fadeIn","fast"],[1,"col-12"],[1,"card"],[1,"card-body"],["type","text","placeholder","Buscar cliente...",1,"form-control",3,"keyup"],["TxtBusqueda",""],["class","row animated fadeIn fast",4,"ngIf"],["class","row",4,"ngIf"],[1,"alert","alert-info","text-center"],[1,"alert-heading"],[1,"fa","fa-spin","fa-refresh","fa-2x"],[1,"mb-0"],[1,"row"],[1,"col-8"],[1,"card-title"],[1,"card-subtitle"],[1,"col"],[1,"text-right"],["routerLink","/dashboard/clientes/nuevo",1,"btn","btn-primary"],[1,"fa","fa-hospital-o"],[1,"table-responsive"],[1,"table","table-bordered"],[1,"w100"],[1,"w100","text-nowrap"],[4,"ngFor","ngForOf"],[1,"btn","btn-secondary",3,"click"],[4,"ngIf"],["class","label label-danger",4,"ngIf"],["class","label label-info",4,"ngIf"],[1,"text-nowrap","text-center"],["data-toggle","tooltip","data-original-title","Edit",3,"routerLink"],[1,"fa","fa-pencil","text-inverse","m-r-10"],[1,"fa","fa-eye","text-inverse","m-r-10"],["data-toggle","tooltip","data-original-title","Close",1,"cursor",3,"click"],[1,"fa","fa-close","text-danger"],["src","https://res.cloudinary.com/aabsolutions/image/upload/v1711909048/asistencia_legal/no-image.jpg",1,"w100","cursor",3,"alt","click"],[1,"w100","cursor",3,"src","alt","click"],[1,"label","label-danger"],[1,"label","label-info"]],template:function(i,r){if(1&i){const o=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"input",4,5),t.NdJ("keyup",function(){t.CHM(o);const l=t.MAs(5);return t.KtG(r.buscar(l.value))}),t.qZA()()()()(),t.YNc(6,At,8,0,"div",6),t.YNc(7,It,41,2,"div",7)}2&i&&(t.xp6(6),t.Q6J("ngIf",r.cargando),t.xp6(1),t.Q6J("ngIf",!r.cargando))},dependencies:[p.sg,p.O5,_.rH],encapsulation:2})}return a})();function Jt(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"div",8)(1,"label",9),t._uU(2,"Foto"),t.qZA(),t.TgZ(3,"div",10)(4,"div",11)(5,"img",32),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.abrirModal(r.clienteSeleccionado))}),t.qZA()()()()}if(2&a){const e=t.oxw();t.xp6(5),t.Q6J("src",e.clienteSeleccionado.img_secure_url,t.LSH)}}let Nt=(()=>{class a{constructor(e,i,r,o,s){this.fb=e,this.clienteSrv=i,this.router=r,this.activatedRoute=o,this.modalImagenSrv=s,this.temas=[]}ngOnInit(){this.activatedRoute.params.subscribe(({id:e})=>this.cargarCliente(e)),this.clienteForm=this.fb.group({cedula:["",c.kI.required],nombre_completo:["",c.kI.required],direccion:["",c.kI.required],celular:["",c.kI.required],correo:["",c.kI.required],tipo_cliente:["",c.kI.required]})}cargarCliente(e){"nuevo"!==e&&this.clienteSrv.cargarClientePorId(e).subscribe(i=>{if(!i)return this.router.navigateByUrl("/dashboard/clientes");const{cedula:r,nombre_completo:o,direccion:s,celular:l,correo:m,tipo_cliente:v}=i;return this.clienteSeleccionado=i,this.clienteForm.setValue({cedula:r,nombre_completo:o,direccion:s,celular:l,correo:m,tipo_cliente:v}),!0})}guardarCliente(){const{nombre_completo:e}=this.clienteForm.value;if(this.clienteSeleccionado){const r={_id:this.clienteSeleccionado._id,...this.clienteForm.value};this.clienteSrv.actualizarCliente(r).subscribe(o=>{u().fire("Actualizado",`${e} actualizado correctamente`,"success"),this.router.navigateByUrl("/dashboard/clientes/")})}else this.clienteSrv.crearCliente(this.clienteForm.value).subscribe(i=>{u().fire("Creado",`${e} creado correctamente`,"success"),this.router.navigateByUrl("/dashboard/clientes/")},i=>{u().fire("Error",i.error.msg,"error")})}abrirModal(e){this.modalImagenSrv.abrirModal("clientes",e._id,e.img_secure_url)}static#t=this.\u0275fac=function(i){return new(i||a)(t.Y36(c.qu),t.Y36(C),t.Y36(_.F0),t.Y36(_.gz),t.Y36(A.$))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-cliente"]],decls:69,vars:3,consts:[[1,"row"],[1,"col-md-6"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"card-subtitle"],[1,"form-horizontal","p-t-20",3,"formGroup","submit"],["class","form-group row",4,"ngIf"],[1,"form-group","row"],["for","exampleInputuname3",1,"col-sm-3","control-label"],[1,"col-sm-9"],[1,"input-group"],[1,"input-group-addon"],[1,"fa","fa-id-card-o"],["type","text","id","exampleInputuname1","placeholder","Escriba la c\xe9dula del cliente","formControlName","cedula",1,"form-control"],[1,"fa","fa-address-book"],["type","text","id","exampleInputuname2","placeholder","Escriba el nombre completo del cliente","formControlName","nombre_completo",1,"form-control"],[1,"fa","fa-map-marker"],["type","text","id","exampleInputuname3","placeholder","Escriba la direcci\xf3n del cliente","formControlName","direccion",1,"form-control"],[1,"fa","fa-headphones"],["type","text","id","exampleInputuname4","placeholder","Escriba el celular del cliente","formControlName","celular",1,"form-control"],[1,"fa","fa-envelope"],["type","text","id","exampleInputuname4","placeholder","Escriba el correo del cliente","formControlName","correo",1,"form-control"],[1,"fa","fa-bookmark"],["formControlName","tipo_cliente",1,"form-control"],["value","","selected",""],["value","NATURAL","selected",""],["value","JURIDICO","selected",""],[1,"form-group","row","m-b-0"],[1,"offset-sm-3","col-sm-9"],["type","submit",1,"btn","btn-success","waves-effect","waves-light",3,"disabled"],[1,"fa","fa-save"],[1,"w140","cursor",3,"src","click"]],template:function(i,r){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),t._uU(5,"Cliente"),t.qZA(),t.TgZ(6,"h6",5),t._uU(7,"Actualizaci\xf3n de informaci\xf3n"),t.qZA(),t.TgZ(8,"form",6),t.NdJ("submit",function(){return r.guardarCliente()}),t.YNc(9,Jt,6,1,"div",7),t.TgZ(10,"div",8)(11,"label",9),t._uU(12,"C\xe9dula*"),t.qZA(),t.TgZ(13,"div",10)(14,"div",11)(15,"div",12),t._UZ(16,"i",13),t.qZA(),t._UZ(17,"input",14),t.qZA()()(),t.TgZ(18,"div",8)(19,"label",9),t._uU(20,"Nombres y Apellidos*"),t.qZA(),t.TgZ(21,"div",10)(22,"div",11)(23,"div",12),t._UZ(24,"i",15),t.qZA(),t._UZ(25,"input",16),t.qZA()()(),t.TgZ(26,"div",8)(27,"label",9),t._uU(28,"Direcci\xf3n*"),t.qZA(),t.TgZ(29,"div",10)(30,"div",11)(31,"div",12),t._UZ(32,"i",17),t.qZA(),t._UZ(33,"input",18),t.qZA()()(),t.TgZ(34,"div",8)(35,"label",9),t._uU(36,"Celular*"),t.qZA(),t.TgZ(37,"div",10)(38,"div",11)(39,"div",12),t._UZ(40,"i",19),t.qZA(),t._UZ(41,"input",20),t.qZA()()(),t.TgZ(42,"div",8)(43,"label",9),t._uU(44,"Correo*"),t.qZA(),t.TgZ(45,"div",10)(46,"div",11)(47,"div",12),t._UZ(48,"i",21),t.qZA(),t._UZ(49,"input",22),t.qZA()()(),t.TgZ(50,"div",8)(51,"label",9),t._uU(52,"Tipo de cliente*"),t.qZA(),t.TgZ(53,"div",10)(54,"div",11)(55,"div",12),t._UZ(56,"i",23),t.qZA(),t.TgZ(57,"select",24)(58,"option",25),t._uU(59,"Seleccione..."),t.qZA(),t.TgZ(60,"option",26),t._uU(61,"Persona natural"),t.qZA(),t.TgZ(62,"option",27),t._uU(63,"Persona jur\xeddica"),t.qZA()()()()(),t.TgZ(64,"div",28)(65,"div",29)(66,"button",30),t._UZ(67,"i",31),t._uU(68," Guardar cambios "),t.qZA()()()()()()()()),2&i&&(t.xp6(8),t.Q6J("formGroup",r.clienteForm),t.xp6(1),t.Q6J("ngIf",r.clienteSeleccionado),t.xp6(57),t.Q6J("disabled",r.clienteForm.invalid))},dependencies:[p.O5,c._Y,c.YN,c.Kr,c.Fj,c.EJ,c.JJ,c.JL,c.sg,c.u],encapsulation:2})}return a})();class B{constructor(n,e,i,r,o,s,l,m,v,J){this.asunto=n,this.texto=e,this.fecha=i,this.cliente=r,this._id=o,this.usuario=s,this.img_public_id=l,this.img_secure_url=m,this.createdAt=v,this.updatedAt=J}}class Ft{constructor(n,e,i,r,o,s,l,m){this.asunto=n,this.texto=e,this.fecha=i,this.tema=r,this._id=o,this.usuario=s,this.img_public_id=l,this.img_secure_url=m}}const h=k.N.base_url;let U=(()=>{class a{constructor(e){this.http=e}get token(){return localStorage.getItem("token")||""}get headers(){return{headers:{"x-token":this.token}}}cargarTemas(e=0,i=0){return this.http.get(`${h}/temas?from=${e}&limit=${i}`,this.headers).pipe((0,g.U)(o=>{const s=o.temas.map(l=>new B(l.asunto,l.texto,l.fecha,l.cliente,l._id,l.usuario,l.img_public_id,l.img_secure_url));return{total:o.total,temas:s}}))}cargarSubtemas(e){return this.http.get(`${h}/subtemas/tema/${e}`,this.headers).pipe((0,g.U)(r=>{const o=r.subtemas.map(s=>new Ft(s.asunto,s.texto,s.fecha,s.tema,s._id,s.usuario));return{total:r.total,subtemas:o}}))}cargarTemasPorCliente(e,i=0,r=0){return this.http.get(`${h}/temas/cliente/${e}`,this.headers).pipe((0,g.U)(s=>{const l=s.temas.map(m=>new B(m.asunto,m.texto,m.fecha,m.cliente,m._id,m.usuario,m.img_public_id,m.img_secure_url));return{total:s.total,temas:l}}))}cargarTemaPorId(e){return this.http.get(`${h}/temas/${e}`,this.headers).pipe((0,g.U)(r=>r.tema))}cargarSubtemaPorId(e){return this.http.get(`${h}/subtemas/${e}`,this.headers).pipe((0,g.U)(r=>r.subtema))}crearTema(e){return this.http.post(`${h}/temas`,e,this.headers)}crearSubtema(e){return this.http.post(`${h}/subtemas/${e.tema}`,e,this.headers)}actualizarTema(e){return this.http.put(`${h}/temas/${e._id}`,e,this.headers)}actualizarSubtema(e){return this.http.put(`${h}/subtemas/${e._id}`,e,this.headers)}eliminarTema(e){return this.http.delete(`${h}/temas/${e}`,this.headers)}eliminarSubtema(e){return this.http.delete(`${h}/subtemas/${e}`,this.headers)}static#t=this.\u0275fac=function(i){return new(i||a)(t.LFG(y.eN))};static#e=this.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();function Et(a,n){1&a&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",8)(3,"h4",9),t._uU(4,"Cargando"),t.qZA(),t._UZ(5,"i",10),t.TgZ(6,"p",11),t._uU(7,"Por favor espere"),t.qZA()()()())}const Yt=function(a){return["/dashboard/temas",a]};function $t(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td",24)(8,"a",25),t._UZ(9,"i",26),t.qZA(),t.TgZ(10,"a",27),t.NdJ("click",function(){const o=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.mostrarModalTema(o._id))}),t._UZ(11,"i",28),t.qZA(),t.TgZ(12,"a",29),t.NdJ("click",function(){const o=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.eliminarTema(o))}),t._UZ(13,"i",30),t.qZA()()()}if(2&a){const e=n.$implicit;t.xp6(2),t.Oqu(e.asunto),t.xp6(2),t.Oqu(e.fecha),t.xp6(2),t.Oqu(e.cliente.nombre_completo),t.xp6(2),t.Q6J("routerLink",t.VKq(4,Yt,e._id))}}function Mt(a,n){if(1&a&&(t.TgZ(0,"div",12)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",12)(5,"div",13)(6,"h4",14),t._uU(7),t.qZA(),t.TgZ(8,"h6",15),t._uU(9,"Temas registrados en mi aplicaci\xf3n"),t.qZA()(),t.TgZ(10,"div",16)(11,"div",17)(12,"a",18),t._UZ(13,"i",19),t._uU(14," Crear Tema "),t.qZA()()()(),t.TgZ(15,"div",20)(16,"table",21)(17,"thead")(18,"tr")(19,"th"),t._uU(20,"Asunto"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"Fecha"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"Cliente"),t.qZA(),t.TgZ(25,"th",22),t._uU(26,"Acciones"),t.qZA()()(),t.TgZ(27,"tbody"),t.YNc(28,$t,14,6,"tr",23),t.qZA()()()()()()()),2&a){const e=t.oxw();t.xp6(7),t.hij("Mostrando temas de (",e.encabezado,")"),t.xp6(21),t.Q6J("ngForOf",e.temas)}}let O=(()=>{class a{constructor(e,i,r,o,s){this.temaSrv=e,this.modalImagenSrv=i,this.busquedasSrv=r,this.clienteSrv=o,this.activatedRoute=s,this.temas=[],this.temasTemp=[],this.encabezado="Todos",this.cargando=!1,this.desde=0}ngOnDestroy(){}ngOnInit(){this.imgSubs=this.imgSubs=this.modalImagenSrv.imagenCambio.pipe(q(200)).subscribe(e=>this.cargarTemas()),this.activatedRoute.params.subscribe(({id:e})=>{e?(this.idClienteSeleccionado=e,this.cargarCliente(e),this.cargarTemasPorCliente(e)):this.cargarTemas()})}cargarTemasPorCliente(e){this.cargando=!0,this.temaSrv.cargarTemasPorCliente(e,this.desde).subscribe(({total:i,temas:r})=>{this.totalTemas=i,this.temas=r,this.temasTemp=r,this.cargando=!1})}cargarTemas(){this.cargando=!0,this.temaSrv.cargarTemas(this.desde).subscribe(({total:e,temas:i})=>{this.totalTemas=e,this.temas=i,this.temasTemp=i,this.cargando=!1})}cargarCliente(e){this.clienteSrv.cargarClientePorId(e).subscribe(i=>{this.clienteSeleccionado=i,this.encabezado=this.clienteSeleccionado.nombre_completo})}cambiarPagina(e){this.desde+=e,this.desde<0?this.desde=0:this.desde>this.totalTemas&&(this.desde-=e),this.cargarTemas()}guardarTema(e){this.temaSrv.crearTema(e).subscribe(i=>{u().fire("Creado corr\xe9ctamente","El tema ha sido creado","success")})}actualizarTema(e){this.temaSrv.actualizarTema(e).subscribe(i=>{u().fire("Actualizado correctamente","El tema ha sido actualizado","success")})}eliminarTema(e){u().fire({title:"\xbfEst\xe1 seguro de eliminar el registro?",text:`Est\xe1 a punto de borrar el tema: ${e.asunto}`,icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xed, elim\xednalo!"}).then(i=>{i.value&&this.temaSrv.eliminarTema(e._id).subscribe(r=>{this.cargarTemas(),u().fire("Tema borrado.","Eliminado corr\xe9ctamente","success")})})}buscar(e){return 0===e.length?this.temas=this.temasTemp:this.idClienteSeleccionado?(this.busquedasSrv.buscarFiltrado("temas",e,this.idClienteSeleccionado).subscribe(i=>{this.temas=i}),!0):(this.busquedasSrv.buscar("temas",e).subscribe(i=>{this.temas=i}),!0)}mostrarModalTema(e){var i=this;return(0,x.Z)(function*(){i.temaSrv.cargarTemaPorId(e).subscribe(r=>{u().fire({title:r.asunto,text:r.texto,footer:`Cliente: ${r.cliente.nombre_completo}`,icon:"info"})})})()}static#t=this.\u0275fac=function(i){return new(i||a)(t.Y36(U),t.Y36(A.$),t.Y36(T),t.Y36(C),t.Y36(_.gz))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-temas"]],decls:8,vars:2,consts:[[1,"row","animated","fadeIn","fast"],[1,"col-12"],[1,"card"],[1,"card-body"],["type","text","placeholder","Buscar tema por asunto...",1,"form-control",3,"keyup"],["txtBusqueda",""],["class","row animated fadeIn fast",4,"ngIf"],["class","row",4,"ngIf"],[1,"alert","alert-info","text-center"],[1,"alert-heading"],[1,"fa","fa-spin","fa-refresh","fa-2x"],[1,"mb-0"],[1,"row"],[1,"col-8"],[1,"card-title"],[1,"card-subtitle"],[1,"col"],[1,"text-right"],["routerLink","/dashboard/temas/nuevo",1,"btn","btn-primary"],[1,"fa","fa-hospital-o"],[1,"table-responsive"],[1,"table","table-bordered"],[1,"text-nowrap","w100"],[4,"ngFor","ngForOf"],[1,"text-nowrap","text-center"],["data-toggle","tooltip","data-original-title","Edit",3,"routerLink"],[1,"fa","fa-pencil","text-inverse","m-r-10"],["data-toggle","tooltip","data-original-title","View",1,"cursor",3,"click"],[1,"fa","fa-eye","text-inverse","m-r-10"],["data-toggle","tooltip","data-original-title","Close",1,"cursor",3,"click"],[1,"fa","fa-close","text-danger"]],template:function(i,r){if(1&i){const o=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"input",4,5),t.NdJ("keyup",function(){t.CHM(o);const l=t.MAs(5);return t.KtG(r.buscar(l.value))}),t.qZA()()()()(),t.YNc(6,Et,8,0,"div",6),t.YNc(7,Mt,29,2,"div",7)}2&i&&(t.xp6(6),t.Q6J("ngIf",r.cargando),t.xp6(1),t.Q6J("ngIf",!r.cargando))},dependencies:[p.sg,p.O5,_.rH],encapsulation:2})}return a})();function Qt(a,n){if(1&a&&(t.TgZ(0,"option",33),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.Q6J("value",e._id),t.xp6(1),t.Oqu(e.nombre_completo)}}function Bt(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"div",39),t._uU(1," Adjunto: "),t.TgZ(2,"a",40),t._UZ(3,"i",41),t.qZA(),t.TgZ(4,"a",42),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.eliminarAdjunto(r.temaSeleccionado))}),t._UZ(5,"i",43),t.qZA()()}if(2&a){const e=t.oxw(2);t.xp6(2),t.Q6J("href",e.urlAdjunto,t.LSH)}}function Ot(a,n){1&a&&(t.TgZ(0,"div",39),t._uU(1," Adjunto: No hay adjunto registrado "),t.qZA())}function Pt(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"div",21)(1,"div",34),t.YNc(2,Bt,6,1,"div",35),t.YNc(3,Ot,2,0,"div",35),t.TgZ(4,"div",3)(5,"h5",4),t._uU(6,"Adjuntar archivo "),t.qZA(),t.TgZ(7,"p",36)(8,"input",37),t.NdJ("change",function(r){t.CHM(e);const o=t.oxw();return t.KtG(o.cambiarArchivo(r.target.files[0]))}),t.qZA()(),t.TgZ(9,"button",38),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.subirImagen())}),t._UZ(10,"i",24),t._uU(11," Subir adjunto "),t.qZA()()()()}if(2&a){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.hayAdjunto),t.xp6(1),t.Q6J("ngIf",!e.hayAdjunto),t.xp6(6),t.Q6J("disabled",!e.archivoSubir)}}const Gt=function(a,n){return["/dashboard/subtemas/u",a,n]};function zt(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",48)(6,"a",49),t._UZ(7,"i",50),t.qZA(),t.TgZ(8,"a",51),t.NdJ("click",function(){const o=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.mostrarModalSubtema(o._id))}),t._UZ(9,"i",52),t.qZA(),t.TgZ(10,"a",42),t.NdJ("click",function(){const o=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.eliminarSubtema(o))}),t._UZ(11,"i",43),t.qZA()()()}if(2&a){const e=n.$implicit,i=t.oxw(2);t.xp6(2),t.Oqu(e.asunto),t.xp6(2),t.Oqu(e.fecha),t.xp6(2),t.Q6J("routerLink",t.WLB(3,Gt,i.idTemaSeleccionado,e._id))}}function jt(a,n){if(1&a&&(t.TgZ(0,"div",0)(1,"div",21)(2,"div",44)(3,"table",45)(4,"thead")(5,"tr")(6,"th"),t._uU(7,"Asunto"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Fecha"),t.qZA(),t.TgZ(10,"th",46),t._uU(11,"Acciones"),t.qZA()()(),t.TgZ(12,"tbody"),t.YNc(13,zt,12,6,"tr",47),t.qZA()()()()()),2&a){const e=t.oxw();t.xp6(13),t.Q6J("ngForOf",e.subtemas)}}function Lt(a,n){if(1&a&&(t.TgZ(0,"div",53),t._uU(1),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.AsE(" \xdaltima modificaci\xf3n realizada por ",e.ultimoUsuario," el ",e.ultimaModificacion," ")}}const Ht=function(a){return["/dashboard/subtemas/n",a,""]};let Kt=(()=>{class a{constructor(e,i,r,o,s,l,m){this.fb=e,this.temaSrv=i,this.clienteSrv=r,this.router=o,this.location=s,this.activatedRoute=l,this.fileUploadService=m,this.clientes=[],this.subtemas=[],this.mostrarSubtemas=!1,this.today=new Date,this.pipe=new p.uU("en-EN"),this.todayWithPipe=null,this.dateWithPipe=null,this.activaBtnSubtemas=!1,this.imgTemp=null,this.hayAdjunto=!1}ngOnInit(){this.temaForm=this.fb.group({asunto:["",c.kI.required],texto:["",c.kI.required],cliente:["",c.kI.required]}),this.temaForm.get("cliente").disable(),this.activatedRoute.params.subscribe(({id:e})=>{this.idTemaSeleccionado=e,this.cargarTema(e)}),this.cargarClientes()}cargarClientes(){this.clienteSrv.cargarClientes(0).subscribe(({clientes:e})=>{this.clientes=e})}cargarTema(e){if("nuevo"===e)return this.mostrarSubtemas=!1,this.activaBtnSubtemas=!0,void this.temaForm.get("cliente").enable();this.temaSrv.cargarTemaPorId(e).subscribe(i=>{if(!i)return this.router.navigateByUrl("/dashboard/temas");const{asunto:r,texto:o,cliente:s}=i;return this.temaSeleccionado=i,this.dateWithPipe=this.pipe.transform(this.temaSeleccionado.updatedAt,"dd/MM/yyyy"),this.ultimaModificacion=this.dateWithPipe,this.ultimoUsuario=this.temaSeleccionado.usuario.nombre,this.temaSeleccionado.img_secure_url&&(this.hayAdjunto=!0,this.urlAdjunto=this.temaSeleccionado.img_secure_url),this.temaForm.setValue({asunto:r,texto:o,cliente:s._id}),this.mostrarSubtemas=!0,this.cargarSubtemas(e),!0})}cargarSubtemas(e){this.temaSrv.cargarSubtemas(e).subscribe(({subtemas:i})=>{this.subtemas=i})}goBack(){this.location.back()}guardarTema(){if(this.temaSeleccionado){const i={_id:this.temaSeleccionado._id,...this.temaForm.value,usuario:this.temaSeleccionado.usuario,cliente:this.temaSeleccionado.cliente,fecha:this.temaSeleccionado.fecha,img_public_id:this.temaSeleccionado.img_public_id,img_secure_url:this.temaSeleccionado.img_secure_url};console.log(i),this.temaSrv.actualizarTema(i).subscribe(r=>{u().fire("Actualizado","Tema actualizado correctamente","success"),this.router.navigateByUrl("/dashboard/temas/")},r=>{u().fire("Error",r.error.msg,"error")})}else{this.todayWithPipe=this.pipe.transform(Date.now(),"dd/MM/yyyy");const e={...this.temaForm.value,fecha:this.todayWithPipe};this.temaSrv.crearTema(e).subscribe(i=>{u().fire("Creado","Tema creado correctamente","success"),this.router.navigateByUrl("/dashboard/temas/")},i=>{u().fire("Error",i.error.msg,"error")})}}mostrarModalSubtema(e){var i=this;return(0,x.Z)(function*(){i.temaSrv.cargarSubtemaPorId(e).subscribe(r=>{u().fire({title:r.asunto,text:r.texto,footer:`Registrado por: ${r.usuario.nombre}`,icon:"info"})})})()}eliminarSubtema(e){u().fire({title:"\xbfEst\xe1 seguro de eliminar el registro?",text:`Est\xe1 a punto de borrar el subtema: ${e.asunto}`,icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xed, elim\xednalo!"}).then(i=>{i.value&&this.temaSrv.eliminarSubtema(e._id).subscribe(r=>{this.cargarSubtemas(this.idTemaSeleccionado),u().fire("Subtema borrado.",`EL subtema: ${e.asunto} fue eliminado corr\xe9ctamente`,"success")})})}cambiarArchivo(e){if(this.archivoSubir=e,!e)return this.imgTemp=null;const i=new FileReader;i.readAsDataURL(e),i.onloadend=()=>{this.imgTemp=i.result}}eliminarAdjunto(e){this.temaSeleccionado.img_public_id=null,this.temaSeleccionado.img_secure_url=null,this.guardarTema()}subirImagen(){this.fileUploadService.actualizarFoto(this.archivoSubir,"temas",this.temaSeleccionado._id).then(e=>{this.temaSeleccionado.img_secure_url=e,u().fire("Guardado","Adjunto registrado con \xe9xito","success"),this.router.navigateByUrl("/dashboard/temas/")}).catch(e=>{console.log(e),u().fire("Error","No se pudo subir la imagen","error")})}regresarTemas(){this.router.navigateByUrl("/dashboard/temas")}static#t=this.\u0275fac=function(i){return new(i||a)(t.Y36(c.qu),t.Y36(U),t.Y36(C),t.Y36(_.F0),t.Y36(p.Ye),t.Y36(_.gz),t.Y36(w.J))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-tema"]],decls:57,vars:10,consts:[[1,"row"],[1,"col-md-6"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"card-subtitle"],[1,"form-horizontal","p-t-20",3,"formGroup","submit"],[1,"form-group","row"],["for","exampleInputuname3",1,"col-sm-3","control-label"],[1,"col-sm-9"],[1,"input-group"],[1,"input-group-addon"],[1,"fa","fa-user"],["formControlName","cliente",1,"form-control"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"fa","fa-envelope"],["type","text","id","exampleInputuname4","placeholder","Escriba el asunto del tema","formControlName","asunto",1,"form-control"],[1,"fa","fa-file-text"],[1,"input-group-text"],["id","exampleInputuname4","placeholder","Escriba el asunto del tema","formControlName","texto","rows","6",1,"form-control"],[1,"col"],[1,"text-right"],["type","submit",1,"btn","btn-success","waves-effect","waves-light","m-r-10",3,"disabled"],[1,"fa","fa-save"],["type","button",1,"btn","btn-danger","waves-effect","waves-light","m-r-10",3,"click"],[1,"fa","fa-backward"],["class","col",4,"ngIf"],[1,"card-subtitle","mt-2"],["class","row",4,"ngIf"],[1,"btn","btn-primary",3,"disabled","routerLink"],[1,"fa","fa-hospital-o"],["class","alert alert-info animated fadeIn fast mt-4",4,"ngIf"],[3,"value"],[1,"card","mt-2"],["class","card-header",4,"ngIf"],[1,"card-text"],["type","file","id","formFile",1,"form-control-sm",3,"change"],["type","button",1,"btn","btn-success","btn-block","waves-effect","waves-light","m-r-10",3,"disabled","click"],[1,"card-header"],["target","_blank","data-toggle","tooltip","data-original-title","View",1,"cursor",3,"href"],[1,"fa","fa-file-pdf-o","text-inverse","m-r-10"],["data-toggle","tooltip","data-original-title","Close",1,"cursor",3,"click"],[1,"fa","fa-close","text-danger"],[1,"table-responsive"],[1,"table","table-bordered"],[1,"text-nowrap","w100"],[4,"ngFor","ngForOf"],[1,"text-nowrap","text-center"],["data-toggle","tooltip","data-original-title","Edit",3,"routerLink"],[1,"fa","fa-pencil","text-inverse","m-r-10"],["data-toggle","tooltip","data-original-title","View",1,"cursor",3,"click"],[1,"fa","fa-eye","text-inverse","m-r-10"],[1,"alert","alert-info","animated","fadeIn","fast","mt-4"]],template:function(i,r){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),t._uU(5,"Tema"),t.qZA(),t.TgZ(6,"h6",5),t._uU(7,"Actualizaci\xf3n de informaci\xf3n"),t.qZA(),t.TgZ(8,"form",6),t.NdJ("submit",function(){return r.guardarTema()}),t.TgZ(9,"div",7)(10,"label",8),t._uU(11,"Cliente*"),t.qZA(),t.TgZ(12,"div",9)(13,"div",10)(14,"div",11),t._UZ(15,"i",12),t.qZA(),t.TgZ(16,"select",13)(17,"option",14),t._uU(18,"Seleccione..."),t.qZA(),t.YNc(19,Qt,2,2,"option",15),t.qZA()()()(),t.TgZ(20,"div",7)(21,"label",8),t._uU(22,"Asunto*"),t.qZA(),t.TgZ(23,"div",9)(24,"div",10)(25,"div",11),t._UZ(26,"i",16),t.qZA(),t._UZ(27,"input",17),t.qZA()()(),t.TgZ(28,"div",7)(29,"label",8),t._uU(30,"Texto*"),t.qZA(),t.TgZ(31,"div",9)(32,"div",10)(33,"div",11),t._UZ(34,"i",18),t.qZA(),t._UZ(35,"span",19)(36,"textarea",20),t.qZA()()(),t.TgZ(37,"div",0)(38,"div",21)(39,"div",22)(40,"button",23),t._UZ(41,"i",24),t._uU(42," Guardar "),t.qZA(),t.TgZ(43,"button",25),t.NdJ("click",function(){return r.regresarTemas()}),t._UZ(44,"i",26),t._uU(45," Regreso "),t.qZA()()()()(),t.YNc(46,Pt,12,3,"div",27),t.TgZ(47,"h6",28),t._uU(48,"Subtemas relacionados"),t.qZA(),t.YNc(49,jt,14,1,"div",29),t.TgZ(50,"div",0)(51,"div",21)(52,"div",22)(53,"button",30),t._UZ(54,"i",31),t._uU(55," Crear Subtema "),t.qZA()()()(),t.YNc(56,Lt,2,2,"div",32),t.qZA()()()()),2&i&&(t.xp6(8),t.Q6J("formGroup",r.temaForm),t.xp6(11),t.Q6J("ngForOf",r.clientes),t.xp6(21),t.Q6J("disabled",r.temaForm.invalid),t.xp6(6),t.Q6J("ngIf",r.mostrarSubtemas),t.xp6(3),t.Q6J("ngIf",r.mostrarSubtemas),t.xp6(4),t.Q6J("disabled",r.activaBtnSubtemas)("routerLink",t.VKq(8,Ht,r.idTemaSeleccionado)),t.xp6(3),t.Q6J("ngIf",r.ultimaModificacion))},dependencies:[p.sg,p.O5,c._Y,c.YN,c.Kr,c.Fj,c.EJ,c.JJ,c.JL,c.sg,c.u,_.rH],encapsulation:2})}return a})();function Rt(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"div",29),t._uU(1," Adjunto: "),t.TgZ(2,"a",30),t._UZ(3,"i",31),t.qZA(),t.TgZ(4,"a",32),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.eliminarAdjunto())}),t._UZ(5,"i",33),t.qZA()()}if(2&a){const e=t.oxw(2);t.xp6(2),t.Q6J("href",e.urlAdjunto,t.LSH)}}function Dt(a,n){1&a&&(t.TgZ(0,"div",29),t._uU(1," Adjunto: No hay adjunto registrado "),t.qZA())}function Vt(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"div",24),t.YNc(1,Rt,6,1,"div",25),t.YNc(2,Dt,2,0,"div",25),t.TgZ(3,"div",3)(4,"h5",4),t._uU(5,"Adjuntar archivo "),t.qZA(),t.TgZ(6,"p",26)(7,"input",27),t.NdJ("change",function(r){t.CHM(e);const o=t.oxw();return t.KtG(o.cambiarArchivo(r.target.files[0]))}),t.qZA()(),t.TgZ(8,"button",28),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.subirImagen())}),t._UZ(9,"i",20),t._uU(10," Subir adjunto "),t.qZA()()()}if(2&a){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.hayAdjunto),t.xp6(1),t.Q6J("ngIf",!e.hayAdjunto),t.xp6(6),t.Q6J("disabled",!e.archivoSubir)}}let P=(()=>{class a{constructor(e,i,r,o,s,l){this.fb=e,this.temaSrv=i,this.router=r,this.location=o,this.activatedRoute=s,this.fileUploadService=l,this.subtemas=[],this.mostrarSubtemas=!1,this.today=new Date,this.pipe=new p.uU("en-EN"),this.todayWithPipe=null,this.imgTemp=null,this.hayAdjunto=!1}ngOnInit(){this.activatedRoute.params.subscribe(({id:e,tid:i,caso:r})=>{"n"===r?this.idTemaSeleccionado=i:"u"===r&&(this.idTemaSeleccionado=i,this.idSubtemaSeleccionado=e,this.cargarSubtema(r,e))}),this.subtemaForm=this.fb.group({asunto:["",c.kI.required],texto:["",c.kI.required]})}cargarSubtema(e,i){"n"!==e&&"u"===e&&this.temaSrv.cargarSubtemaPorId(i).subscribe(r=>{if(!r)return this.router.navigateByUrl("/dashboard/temas");const{asunto:o,texto:s}=r;return this.subtemaSeleccionado=r,this.subtemaForm.setValue({asunto:o,texto:s}),this.subtemaSeleccionado.img_secure_url&&(this.hayAdjunto=!0,this.urlAdjunto=this.subtemaSeleccionado.img_secure_url),!0})}goBack(){this.location.back()}guardarSubtema(){if(this.todayWithPipe=this.pipe.transform(Date.now(),"dd/MM/yyyy"),this.subtemaSeleccionado){const i={_id:this.idSubtemaSeleccionado,...this.subtemaForm.value,fecha:this.todayWithPipe,img_public_id:this.subtemaSeleccionado.img_public_id,img_secure_url:this.subtemaSeleccionado.img_secure_url};this.temaSrv.actualizarSubtema(i).subscribe(r=>{u().fire("Actualizado","Subtema actualizado correctamente","success"),this.router.navigateByUrl(`/dashboard/temas/${this.idTemaSeleccionado}`)},r=>{u().fire("Error",r.error.msg,"error")})}else{const e={...this.subtemaForm.value,fecha:this.todayWithPipe,tema:this.idTemaSeleccionado};this.temaSrv.crearSubtema(e).subscribe(i=>{u().fire("Creado","Subtema creado correctamente","success"),this.router.navigateByUrl(`/dashboard/temas/${this.idTemaSeleccionado}`)},i=>{u().fire("Error",i.error.msg,"error")})}}cambiarArchivo(e){if(this.archivoSubir=e,!e)return this.imgTemp=null;const i=new FileReader;i.readAsDataURL(e),i.onloadend=()=>{this.imgTemp=i.result}}eliminarAdjunto(){this.subtemaSeleccionado.img_public_id=null,this.subtemaSeleccionado.img_secure_url=null,this.guardarSubtema()}subirImagen(){this.fileUploadService.actualizarFoto(this.archivoSubir,"subtemas",this.subtemaSeleccionado._id).then(e=>{this.subtemaSeleccionado.img_secure_url=e,u().fire("Guardado","Adjunto registrado con \xe9xito","success"),this.router.navigateByUrl(`/dashboard/temas/${this.idTemaSeleccionado}`)}).catch(e=>{console.log(e),u().fire("Error","No se pudo subir la imagen","error")})}static#t=this.\u0275fac=function(i){return new(i||a)(t.Y36(c.qu),t.Y36(U),t.Y36(_.F0),t.Y36(p.Ye),t.Y36(_.gz),t.Y36(w.J))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-subtema"]],decls:36,vars:3,consts:[[1,"row"],[1,"col-md-6"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"card-subtitle"],[1,"form-horizontal","p-t-20",3,"formGroup","submit"],[1,"form-group","row"],["for","exampleInputuname3",1,"col-sm-3","control-label"],[1,"col-sm-9"],[1,"input-group"],[1,"input-group-addon"],[1,"fa","fa-envelope"],["type","text","id","exampleInputuname4","placeholder","Escriba el asunto del tema","formControlName","asunto",1,"form-control"],[1,"fa","fa-file-text"],[1,"input-group-text"],["id","exampleInputuname4","placeholder","Escriba el asunto del tema","formControlName","texto","rows","6",1,"form-control"],[1,"col"],[1,"text-right"],["type","button",1,"btn","btn-success","waves-effect","waves-light","m-r-10",3,"disabled","click"],[1,"fa","fa-save"],["type","button",1,"btn","btn-danger","waves-effect","waves-light","m-r-10",3,"click"],[1,"fa","fa-backward"],["class","card mt-2",4,"ngIf"],[1,"card","mt-2"],["class","card-header",4,"ngIf"],[1,"card-text"],["type","file","id","formFile",1,"form-control-sm",3,"change"],["type","button",1,"btn","btn-success","btn-block","waves-effect","waves-light","m-r-10",3,"disabled","click"],[1,"card-header"],["target","_blank","data-toggle","tooltip","data-original-title","View",1,"cursor",3,"href"],[1,"fa","fa-file-pdf-o","text-inverse","m-r-10"],["data-toggle","tooltip","data-original-title","Close",1,"cursor",3,"click"],[1,"fa","fa-close","text-danger"]],template:function(i,r){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),t._uU(5,"Subtema"),t.qZA(),t.TgZ(6,"h6",5),t._uU(7,"Actualizaci\xf3n de informaci\xf3n"),t.qZA(),t.TgZ(8,"form",6),t.NdJ("submit",function(){return r.guardarSubtema()}),t.TgZ(9,"div",7)(10,"label",8),t._uU(11,"Asunto*"),t.qZA(),t.TgZ(12,"div",9)(13,"div",10)(14,"div",11),t._UZ(15,"i",12),t.qZA(),t._UZ(16,"input",13),t.qZA()()(),t.TgZ(17,"div",7)(18,"label",8),t._uU(19,"Texto*"),t.qZA(),t.TgZ(20,"div",9)(21,"div",10)(22,"div",11),t._UZ(23,"i",14),t.qZA(),t._UZ(24,"span",15)(25,"textarea",16),t.qZA()()()(),t.TgZ(26,"div",0)(27,"div",17)(28,"div",18)(29,"button",19),t.NdJ("click",function(){return r.guardarSubtema()}),t._UZ(30,"i",20),t._uU(31," Guardar "),t.qZA(),t.TgZ(32,"button",21),t.NdJ("click",function(){return r.goBack()}),t._UZ(33,"i",22),t._uU(34," Regreso "),t.qZA()(),t.YNc(35,Vt,11,3,"div",23),t.qZA()()()()()()),2&i&&(t.xp6(8),t.Q6J("formGroup",r.subtemaForm),t.xp6(21),t.Q6J("disabled",r.subtemaForm.invalid),t.xp6(6),t.Q6J("ngIf",r.subtemaSeleccionado))},dependencies:[p.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u],encapsulation:2})}return a})();function Wt(a,n){1&a&&(t.TgZ(0,"div",7),t._uU(1," No se encontraron clientes con el t\xe9rmino buscado "),t.qZA())}const Xt=function(a){return["/dashboard/temas/cliente",a]};function te(a,n){if(1&a&&(t.TgZ(0,"tr",11)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",9)(4,"a",12),t._UZ(5,"i",13),t.qZA()()()),2&a){const e=n.$implicit;t.xp6(2),t.Oqu(e.nombre_completo),t.xp6(2),t.Q6J("routerLink",t.VKq(2,Xt,e._id))}}function ee(a,n){if(1&a&&(t.TgZ(0,"table",8)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"Nombre"),t.qZA(),t.TgZ(5,"th",9),t._uU(6,"Ver tr\xe1mites"),t.qZA()()(),t.TgZ(7,"tbody"),t.YNc(8,te,6,4,"tr",10),t.qZA()()),2&a){const e=t.oxw();t.xp6(8),t.Q6J("ngForOf",e.clientesEncontrados)}}function ie(a,n){1&a&&(t.TgZ(0,"div",7),t._uU(1," No se encontraron temas con el t\xe9rmino buscado "),t.qZA())}const ae=function(a){return["/dashboard/temas",a]};function re(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"tr",11)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",9)(6,"a",12),t._UZ(7,"i",14),t.qZA(),t.TgZ(8,"a",15),t.NdJ("click",function(){const o=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.mostrarModalTema(o._id))}),t._UZ(9,"i",13),t.qZA()()()}if(2&a){const e=n.$implicit;t.xp6(2),t.Oqu(e.asunto),t.xp6(2),t.Oqu(e.cliente.nombre_completo),t.xp6(2),t.Q6J("routerLink",t.VKq(3,ae,e._id))}}function oe(a,n){if(1&a&&(t.TgZ(0,"table",8)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"Asunto"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Pertenece a"),t.qZA(),t.TgZ(7,"th",9),t._uU(8,"Acciones"),t.qZA()()(),t.TgZ(9,"tbody"),t.YNc(10,re,10,5,"tr",10),t.qZA()()),2&a){const e=t.oxw();t.xp6(10),t.Q6J("ngForOf",e.temasEncontrados)}}const ne=[{path:"",component:j,data:{titulo:"Dashboard"}},{path:"perfil",component:Zt,data:{titulo:"Perfil"}},{path:"settings",component:z,data:{titulo:"Ajustes de cuenta"}},{path:"buscar/:termino",component:(()=>{class a{constructor(e,i,r){this.activatedRoute=e,this.busquedaSrv=i,this.temaSrv=r,this.usuariosEncontrados=[],this.clientesEncontrados=[],this.temasEncontrados=[]}ngOnInit(){this.activatedRoute.params.subscribe(({termino:e})=>this.busquedaGlobal(e))}busquedaGlobal(e){this.busquedaSrv.buscarTodo(e).subscribe(i=>{this.usuariosEncontrados=i.coincidenciasUsuario,this.clientesEncontrados=i.coincidenciasCliente,this.temasEncontrados=i.coincidenciasTema})}mostrarModalTema(e){var i=this;return(0,x.Z)(function*(){i.temaSrv.cargarTemaPorId(e).subscribe(r=>{u().fire({title:r.asunto,text:r.texto,footer:`Cliente: ${r.cliente.nombre_completo}`,icon:"info"})})})()}static#t=this.\u0275fac=function(i){return new(i||a)(t.Y36(_.gz),t.Y36(T),t.Y36(U))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-busqueda"]],decls:17,vars:4,consts:[[1,"row","animated","fadeIn","fast"],[1,"col-6"],[1,"card"],[1,"card-body"],["class","alert alert-info animated fadeIn fast",4,"ngIf"],[1,"table-responsive"],["class","table animated fadeIn fast",4,"ngIf"],[1,"alert","alert-info","animated","fadeIn","fast"],[1,"table","animated","fadeIn","fast"],[1,"text-nowrap","text-center"],["class","animated fadeIn fast",4,"ngFor","ngForOf"],[1,"animated","fadeIn","fast"],["data-toggle","tooltip","data-original-title","Edit",3,"routerLink"],[1,"fa","fa-eye","text-inverse","m-r-10"],[1,"fa","fa-pencil","text-inverse","m-r-10"],["data-toggle","tooltip","data-original-title","View",1,"cursor",3,"click"]],template:function(i,r){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3"),t._uU(5,"Clientes"),t.qZA(),t.YNc(6,Wt,2,0,"div",4),t.TgZ(7,"div",5),t.YNc(8,ee,9,1,"table",6),t.qZA()()()(),t.TgZ(9,"div",1)(10,"div",2)(11,"div",3)(12,"h3"),t._uU(13,"Temas"),t.qZA(),t.YNc(14,ie,2,0,"div",4),t.TgZ(15,"div",5),t.YNc(16,oe,11,1,"table",6),t.qZA()()()()()),2&i&&(t.xp6(6),t.Q6J("ngIf",0===r.clientesEncontrados.length),t.xp6(2),t.Q6J("ngIf",r.clientesEncontrados.length>0),t.xp6(6),t.Q6J("ngIf",0===r.temasEncontrados.length),t.xp6(2),t.Q6J("ngIf",r.temasEncontrados.length>0))},dependencies:[p.sg,p.O5,_.rH],encapsulation:2})}return a})(),data:{titulo:"Buscar"}},{path:"usuarios",canActivate:[Tt],component:ft,data:{titulo:"Mantenimiento de usuarios"}},{path:"temas",component:O,data:{titulo:"Administraci\xf3n de temas"}},{path:"temas/:id",component:Kt,data:{titulo:"Administraci\xf3n de temas"}},{path:"temas/cliente/:id",component:O,data:{titulo:"Administraci\xf3n de temas"}},{path:"subtemas/:id",component:P,data:{titulo:"Administraci\xf3n de subtemas"}},{path:"subtemas/:caso/:tid/:id",component:P,data:{titulo:"Administraci\xf3n de subtemas"}},{path:"clientes",component:wt,data:{titulo:"Administraci\xf3n de clientes"}},{path:"clientes/:id",component:Nt,data:{titulo:"Administraci\xf3n de datos del cliente"}}];let se=(()=>{class a{static#t=this.\u0275fac=function(i){return new(i||a)};static#e=this.\u0275mod=t.oAB({type:a});static#i=this.\u0275inj=t.cJS({imports:[_.Bz.forChild(ne),_.Bz]})}return a})()}}]);